let searchTechnologyInput=document.getElementById("aoedb-search-technologies-input");document.getElementById("aoedb-search-technologies-form").onsubmit=()=>{let a=searchTechnologyInput.value;return window.location.replace(`technologiesSearch.html?search=${encodeURIComponent(a.trim())}`),!1};const getTechnology=async()=>{let a=window.location.href,b=a.substring(a.lastIndexOf("=")+1);const c=await fetch(`https://age-of-empires-2-api.herokuapp.com/api/v1/technology/${b}`),d=await c.json();if(!d)throw new error("No se ha podido establecer conexion");else return d},getName=async a=>{if(a){const b=await fetch(a),c=await b.json();return c.name}return"Not Found"},getDevelopsIn=async a=>{if(a){const b=await fetch(a),c=await b.json();return c}return"Not Found"},printTechnology=async()=>{let a=await getTechnology(),b=document.getElementsByClassName("aoedb-search-box-body")[0],c=0,d=document.getElementsByClassName("aoedb-search-box-header")[0],e="",f=await getDevelopsIn(a.develops_in);e=void 0===f[0]?f.name:f[0].name,a.message?d.innerHTML=`<h2>${a.message}</h2>`:(d.innerHTML=`<h2>${a.name}</h2>`,b.innerHTML=`
        <div>
        <p><span>Expansion: </span>${a.expansion}</p>
        <p><span>Description: </span>${a.description}</p>
        <p><span>Age: </span>${a.age}</p>
        <p><span>Build Time: </span>${a.build_time}</p>
        </div>
        <div>
        <p><span>Technology Cost:</span></p>
        <ul class="aoedb-box-cost"></ul>
        <p><span>Aplies To:</span></p>
        <ul class="aoedb-box-apliesto"></ul>
        <p class="aoedb-box-tech"><span>Develops In: </span> ${e}</p>
        </div>
        `);let g=document.getElementsByClassName("aoedb-box-cost")[c],h=document.getElementsByClassName("aoedb-box-apliesto")[c];c++;let i=Object.entries(a.cost);for(let a of i){let b=document.createElement("li"),c=document.createTextNode(`${a[0]}: ${a[1]}`);b.appendChild(c),g.appendChild(b)}if(!a.applies_to){let a=document.createElement("li"),b=document.createTextNode(`Player's Civilization`);a.appendChild(b),h.appendChild(a)}else for(apliesTo of a.applies_to)if(apliesTo.includes("https")){let a=apliesTo,b=await getName(a),c=document.createElement("li"),d=document.createTextNode(`${b}`);c.appendChild(d),h.appendChild(c)}else{let a=document.createElement("li"),b=document.createTextNode(`${apliesTo}`);a.appendChild(b),h.appendChild(a)}};printTechnology().then();