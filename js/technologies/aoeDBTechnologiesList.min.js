let searchTechnologyInput=document.getElementById("aoedb-search-technologies-input");document.getElementById("aoedb-search-technologies-form").onsubmit=()=>{let a=searchTechnologyInput.value;return window.location.replace(`technologiesSearch.html?search=${encodeURIComponent(a.trim())}`),!1};const getTechnologies=async()=>{const a=await fetch("https://age-of-empires-2-api.herokuapp.com/api/v1/technologies"),b=await a.json();if(!b)throw new error("No se ha podido establecer conexion");else return b.technologies},getName=async a=>{if(a){const b=await fetch(a),c=await b.json();return c.name}return"Not Found"},getDevelopsIn=async a=>{if(a){const b=await fetch(a),c=await b.json();return c}return"Not Found"},printTechnologies=async()=>{let a=await getTechnologies(),b=document.getElementById("aoedb-body"),c=0;for(let d of a){let a="",e=await getDevelopsIn(d.develops_in);a=void 0===e[0]?e.name:e[0].name;let f=document.createElement("div");f.className="aoedb-box",b.appendChild(f),f.innerHTML=`
        <div class="aoedb-box-header">
        <h2>${d.name}</h2>
        </div><div class="aoedb-box-body">
        <p><span>Expansion: </span>${d.expansion}</p>
        <p><span>Description: </span>${d.description}</p>
        <p><span>Build in: </span>${d.build_time}</p>
        <p><span>Technology Cost:</span></p>
        <ul class="aoedb-box-cost"></ul>
        <p><span>Aplies To:</span></p>
        <ul class="aoedb-box-apliesto"></ul>
        <p class="aoedb-box-tech"><span>Develops In: </span> ${a}</p></div>`,f.onclick=()=>{window.location.replace(`technologiesSearch.html?search=${encodeURIComponent(d.id)}`)};let g=document.getElementsByClassName("aoedb-box-cost")[c],h=document.getElementsByClassName("aoedb-box-apliesto")[c];c++;let i=Object.entries(d.cost);for(let a of i){let b=document.createElement("li"),c=document.createTextNode(`${a[0]}: ${a[1]}`);b.appendChild(c),g.appendChild(b)}if(!d.applies_to){let a=document.createElement("li"),b=document.createTextNode(`Player's Civilization`);a.appendChild(b),h.appendChild(a)}else for(apliesTo of d.applies_to)if(apliesTo.includes("https")){let a=apliesTo,b=await getName(a),c=document.createElement("li"),d=document.createTextNode(`${b}`);c.appendChild(d),h.appendChild(c)}else{let a=document.createElement("li"),b=document.createTextNode(`${apliesTo}`);a.appendChild(b),h.appendChild(a)}}};printTechnologies().then();